
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">


<style>
body {background-color:beige;}

.tile-group {background-color:black; width:96px; height:96px;}
.msgbox{
	width:96px; height:96px;
	background-color:silver; 
	border-color:black;
	border-width:1px;
	color:black;
	overflow:auto;
	font-family:'roboto' sans-serif;
	font-size:0.75em;
}
p {
	background-color:gray;
	border-color:black;
	border-width:1px;
	width:96px;
	padding:0px;
	margin:0px;
	color:white;
	font-family:roboto, sans-serif; 
	font-size:0.75em;
	text-align:center;
}

</style>
<script type="text/javascript">

	function msgBoxClear(){$('.msgbox').text('')}
	
	function commandEcho(command){
		$('.msgbox').text(command)
		setTimeout(msgBoxClear, 1000)
	}

	var onSuccess
	const onSuccessMain=function(response){
		//typical handler
		if (typeof onSuccess=='function'){
		
		} else {
			$('.msgbox').text(response)
			setTimeout(msgBoxClear, 1000)
		}
	}
	
	var onFailure
	const onFailureMain=function(er){
		//typical handler
		$('.msgbox').text(er)
		setTimeout(msgBoxClear, 1000)
	}
	
	// load jquery 
	var jQuery=require('jquery')
	window.$=jQuery
	

	const REMOTE = require('electron').remote
	const WM=REMOTE.require('electron-window-manager')
	WM.sharedData.watch('xSuccessTime', onSuccessMain)
	WM.sharedData.watch('xFailureTime', onFailureMain)

	
	// basic browser behavior...
	$(window).on({
		// prevent accidental drag-and-drop on window
		"drop": function(e){ e=e||event; e.preventDefault(); return false;},
		"dragover":function(e){ e=e||event; e.preventDefault(); false;},
		'contextmenu':function(){}
	})
	
	// activate
	$(document).ready(function(){
		$('.tile')
		.on('mouseenter', function(){$(this).css('fill','gold')})
		.on('mouseleave', function(){$(this).css('fill','silver')})
		.on('mousedown', function(){$(this).css('fill','gray')})
		.on('mouseup', function(){$(this).css('fill','silver')})
		.on('click',function(){
			//find desc submit to CAD as a command
			var command=$(this).find('.command').text()
			onSuccess=$(this).find('.onSuccess').text()
			onFailure=$(this).find('.onFailure').text()
			commandEcho(command)
			//command may be the same as previous, not changing so
			WM.sharedData.set('xCommand', command)
			//CAD.js watches for time stamp which always changes...
			WM.sharedData.set('xCommandTime', new Date())
		})
	}) 

</script>


</head>

<body>


<p>Line Tools</p>
<div class='tile-group' >
<svg  viewBox='0 0 96 96' xmlns='http://www.w3.org/2000/svg'>

<defs>
	<g id='line2p'>
		<line x1='8' y1='24' x2='24' y2='8' stroke='black' stroke-width='1'/>
		<circle cx='8' cy='24' r='2' stroke='red' fill='black'/>
		<circle cx='24' cy='8' r='2' stroke='red' fill='black'/>
	</g>
</defs>

	<rect x='0' y='0' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='onSuccess'>onSuccess</desc>
		<desc class='onFailure'>onFailure</desc>
	</rect>
	<use x='0' y='0' xlink:href="#line2p" />

	<rect x='32' y='0' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='32' y='0' xlink:href="#line2p" />

	<rect x='64' y='0' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='64' y='0' xlink:href="#line2p" />

	<!-- 2ND ROW -->
	
	<rect x='0' y='32' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='0' y='32' xlink:href="#line2p" />

	<rect x='32' y='32' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='32' y='32' xlink:href="#line2p" />

	<rect x='64' y='32' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='64' y='32' xlink:href="#line2p" />

	<!-- 3RD ROW -->
	
	<rect x='0' y='64' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='0' y='64' xlink:href="#line2p" />

	<rect x='32' y='64' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='32' y='64' xlink:href="#line2p" />

	<rect x='64' y='64' class='tile' width='32' height='32' 
		fill='silver' stroke='black' stroke-width='1'>
		<title>line2p</title>
		<desc class='command'>line(1,1,100,100)</desc>
		<desc class='success'>line2p</desc>
		<desc class='failure'>line2p_fail</desc>
	</rect>
	<use x='64' y='64' xlink:href="#line2p" />

</svg>
</div REM='tile-group'>
<p>Messages</p>
<div class='msgbox'> 

</div>



</body>
</html>